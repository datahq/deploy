frontend:
  environment:
    SITE_URL: https://${DOMAIN}
    API_URL: https://${DOMAIN_API}
    BITSTORE_URL: https://${PKGSTORE_BUCKET}
    AUTH_UR: http://auth:8000/
    FLOWMANAGER_URL: http://specstore:8000/
    METASTORE_URL: http://metastore:8000/
    RESOLVER_URL: http://resolver:8000/
    FILEMANAGER_URL: http://filemanager:8000
    STRIPE_PUBLISHABLE_KEY: ${STRIPE_PUBLISHABLE_KEY}
    STRIPE_SECRET_KEY: ${STRIPE_SECRET_KEY}
auth:
  environment:
    VIRTUAL_HOST: ${DOMAIN_API}/auth/*
    GUNICORN_PORT: 8000
    DATABASE_URL: ${RDS_URI}
    EXTERNAL_ADDRESS: ${DOMAIN_API}
    PRIVATE_KEY:
    PUBLIC_KEY:
    GOOGLE_KEY: ${GOOGLE_KEY}
    GOOGLE_SECRET: ${GOOGLE_SECRET}
    GITHUB_KEY:
    GITHUB_SECRET:
    MAILCHIMP_USER: ${MAILCHIMP_USER}
    MAILCHIMP_SECRET: ${MAILCHIMP_SECRET}
    MAILCHIMP_LIST_ID: ${MAILCHIMP_LIST_ID}
    ALLOWED_SERVICES: ${ALLOWED_SERVICES}
    INSTALLED_EXTENSIONS: ${INSTALLED_EXTENSIONS}
plans:
  environment:
      DATABASE_URL: ${RDS_URI}
      GUNICORN_PORT: 8000
      # Pick something secret for production!
      BASIC_AUTH_USERNAME: ${PLANS_ADMIN_USERNAME}
      BASIC_AUTH_PASSWORD: ${PLANS_ADMIN_PASSWORD}
      SESSION_SECRET_KEY: ${PLANS_SESSION_SECRET_KEY}
rawstore:
  environment:
    VIRTUAL_HOST: ${DOMAIN_API}/rawstore/*
    AUTH_SERVER: http://auth:8000
    STORAGE_ACCESS_KEY_ID: ${AWS_ACCESS_KEY}
    STORAGE_SECRET_ACCESS_KEY: ${AWS_SECRET_KEY}
    STORAGE_BUCKET_NAME: ${RAWSTORE_BUCKET}
    STORAGE_PATH_PATTERN: '{md5_hex}{extension}'
    DATABASE_URL: ${RDS_URI}
specstore:
  environment:
    VIRTUAL_HOST: ${DOMAIN_API}/source/*
    DATASETS_INDEX_NAME: datahub
    EVENTS_INDEX_NAME: events
    AUTH_SERVER: auth:8000
    DATABASE_URL:  ${RDS_URI}
    EVENTS_ELASTICSEARCH_HOST: ${ELASTICEARCH_URI}
    FILEMANAGER_DATABASE_URL: ${RDS_URI}
    DPP_ELASTICSEARCH: ${ELASTICEARCH_URI}
    PKGSTORE_BUCKET: ${PKGSTORE_BUCKET}
    AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY}
    AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_KEY}
resolver:
  environment:
    VIRTUAL_HOST: ${DOMAIN_API}/resolver/*
    AUTH_SERVER: http://auth:8000
metastore:
  environment:
    VIRTUAL_HOST: ${DOMAIN_API}/metastore/*
    DATAHUB_ELASTICSEARCH_ADDRESS: ${ELASTICEARCH_URI}
    PRIVATE_KEY:
filemanager:
  environment:
    DATABASE_URL: ${RDS_URI}
factory:
  environment:
    DATABASE_URL: ${RDS_URI}
